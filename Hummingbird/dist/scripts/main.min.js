/*!
 *
 *  Web Starter Kit
 *  Copyright 2015 Google Inc. All rights reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License
 *
 */
!function(){"use strict";function e(e){return 26>e?e+65:52>e?e+71:62>e?e-4:62===e?43:63===e?47:65}function t(t){for(var n=2,o="",r=t.length,i=0,a=0;r>a;a++)n=a%3,a>0&&4*a/3%76===0&&(o+="\r\n"),i|=t[a]<<(16>>>n&24),(2===n||t.length-a===1)&&(o+=String.fromCharCode(e(i>>>18&63),e(i>>>12&63),e(i>>>6&63),e(63&i)),i=0);return o.substr(0,o.length-2+n)+(2===n?"":1===n?"=":"==")}function n(e){for(var t,n,o=e.length,r=0,i=0;o>i;i++)n=e.charCodeAt(i),r+=128>n?1:2048>n?2:65536>n?3:2097152>n?4:67108864>n?5:6;t=new Uint8Array(r);for(var a=0,l=0;r>a;l++)n=e.charCodeAt(l),128>n?t[a++]=n:2048>n?(t[a++]=192+(n>>>6),t[a++]=128+(63&n)):65536>n?(t[a++]=224+(n>>>12),t[a++]=128+(n>>>6&63),t[a++]=128+(63&n)):2097152>n?(t[a++]=240+(n>>>18),t[a++]=128+(n>>>12&63),t[a++]=128+(n>>>6&63),t[a++]=128+(63&n)):67108864>n?(t[a++]=248+(n>>>24),t[a++]=128+(n>>>18&63),t[a++]=128+(n>>>12&63),t[a++]=128+(n>>>6&63),t[a++]=128+(63&n)):(t[a++]=252+(n>>>30),t[a++]=128+(n>>>24&63),t[a++]=128+(n>>>18&63),t[a++]=128+(n>>>12&63),t[a++]=128+(n>>>6&63),t[a++]=128+(63&n));return t}function o(e){var t=e.target.result;t&&t.length&&c(t)}function r(e){return t(n(e))}function i(e){var t=(new XMLSerializer).serializeToString(e),n=document.getElementById("downloadLink");n.href="data:text;charset=utf-8;base64,"+r(t),n.style.display="inline"}function a(e,t){var n=e.getAttribute("s").trim();n in h&&t.replaceChild(h[n],e)}function l(e,t){var n=e.getAttribute("s").trim();n in m&&t.replaceChild(m[n],e)}function d(e,t){var n=parseInt($('input[name="startType"]:checked').val()),o=parseInt($('input[name="endType"]:checked').val());n===o||(1===n&&2===o?a(e,t):2===n&&1===o?l(e,t):console.log("this shouldn't happen     start num: "+n+" end num: "+o))}function c(e){var t;if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);var o,r,a=t.documentElement;for(r=0;r<a.childNodes.length;r++)"blocks"===a.childNodes[r].nodeName&&(o=a.childNodes[r]);var l=o.childNodes;for(r=0;r<l.length;r++)"block-definition"===l[r].nodeName&&d(l[r],o);setTimeout(function(){i(t)},100)}var s,u,f=!1,h={},m={};$(function(){$.get("chromeHB.xml",function(e){s=e}),$.get("httpHB.xml",function(e){u=e}),setTimeout(g,1e3)});var g=function(){(void 0===s||void 0===u)&&setTimeout(g,1e3);var e,t,n=s,o=u,r=n.documentElement;for(t=0;t<r.childNodes.length;t++)if("blocks"===r.childNodes[t].nodeName){e=r.childNodes[t];break}var i=e.childNodes;for(t=0;t<i.length;t++)"block-definition"===i[t].nodeName&&(h[i[t].getAttribute("s").trim()]=i[t]);var a,l=o.documentElement;for(t=0;t<l.childNodes.length;t++)if("blocks"===l.childNodes[t].nodeName){a=l.childNodes[t];break}var d=a.childNodes;for(t=0;t<d.length;t++)"block-definition"===d[t].nodeName&&(m[d[t].getAttribute("s").trim()]=d[t]);f=!0},v=$("#files"),b=$("#upload");b.on("click",function(){window.FileReader||alert("Your browser is not supported"),f||alert("Resources are still being loaded, please wait a moment and then try again");var e=v.get(0),t=new FileReader;if(e.files.length){var n=e.files[0];t.readAsText(n),$(t).on("load",o)}else alert("Please upload a file before continuing")})}();