/*!
 *
 *  Web Starter Kit
 *  Copyright 2015 Google Inc. All rights reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License
 *
 */
!function(){"use strict";function e(e){return 26>e?e+65:52>e?e+71:62>e?e-4:62===e?43:63===e?47:65}function t(t){for(var n=2,i="",o=t.length,r=0,l=0;o>l;l++)n=l%3,l>0&&4*l/3%76===0&&(i+="\r\n"),r|=t[l]<<(16>>>n&24),(2===n||t.length-l===1)&&(i+=String.fromCharCode(e(r>>>18&63),e(r>>>12&63),e(r>>>6&63),e(63&r)),r=0);return i.substr(0,i.length-2+n)+(2===n?"":1===n?"=":"==")}function n(e){for(var t,n,i=e.length,o=0,r=0;i>r;r++)n=e.charCodeAt(r),o+=128>n?1:2048>n?2:65536>n?3:2097152>n?4:67108864>n?5:6;t=new Uint8Array(o);for(var l=0,a=0;o>l;a++)n=e.charCodeAt(a),128>n?t[l++]=n:2048>n?(t[l++]=192+(n>>>6),t[l++]=128+(63&n)):65536>n?(t[l++]=224+(n>>>12),t[l++]=128+(n>>>6&63),t[l++]=128+(63&n)):2097152>n?(t[l++]=240+(n>>>18),t[l++]=128+(n>>>12&63),t[l++]=128+(n>>>6&63),t[l++]=128+(63&n)):67108864>n?(t[l++]=248+(n>>>24),t[l++]=128+(n>>>18&63),t[l++]=128+(n>>>12&63),t[l++]=128+(n>>>6&63),t[l++]=128+(63&n)):(t[l++]=252+(n>>>30),t[l++]=128+(n>>>24&63),t[l++]=128+(n>>>18&63),t[l++]=128+(n>>>12&63),t[l++]=128+(n>>>6&63),t[l++]=128+(63&n));return t}function i(e){var t=e.target.result;t&&t.length&&s(t)}function o(e){return t(n(e))}function r(e){var t=(new XMLSerializer).serializeToString(e),n=document.getElementById("downloadLink");n.href="data:text;charset=utf-8;base64,"+o(t),n.style.display="inline"}function l(e,t){var n=e.getAttribute("s").trim();n in u[v]&&t.replaceChild(u[v][n],e)}function a(e,t){var n=e.getAttribute("s").trim();n in f[v]&&t.replaceChild(f[v][n],e)}function c(e){if(0!==v){var t,n=u[v];if(1===p&&2===b)for(var i in n)t=n[i],"other"===t.getAttribute("category").trim()&&e.appendChild(t);else if(2===p&&1===b)for(var o=0;o<e.childNodes.length;o++)t=e.childNodes[o],"block-definition"===t.nodeName&&"other"===t.getAttribute("category").trim()&&t.getAttribute("s").trim()in n&&e.removeChild(t)}}function d(e,t){p===b||(1===p&&2===b?l(e,t):2===p&&1===b?a(e,t):console.log("this shouldn't happen     start num: "+p+" end num: "+b))}function s(e){var t;if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);var i,o,l=t.documentElement;for(o=0;o<l.childNodes.length;o++)"blocks"===l.childNodes[o].nodeName&&(i=l.childNodes[o]);c(i);var a=i.childNodes;for(o=0;o<a.length;o++)"block-definition"===a[o].nodeName&&d(a[o],i);setTimeout(function(){r(t)},200)}var h=!1,u=[{},{},{},{}],f=[{},{},{},{}],m=[],g=[];$(function(){$.get("chromeFinch.xml",function(e){m[0]=e}),$.get("httpFinch.xml",function(e){g[0]=e}),$.get("chromeFinch1.xml",function(e){m[1]=e}),$.get("httpFinch1.xml",function(e){g[1]=e}),$.get("chromeFinch2.xml",function(e){m[2]=e}),$.get("httpFinch2.xml",function(e){g[2]=e}),$.get("chromeFinch3.xml",function(e){m[3]=e}),$.get("httpFinch3.xml",function(e){g[3]=e}),setTimeout(N,1e3)});var v,p,b,N=function(){(void 0===m[0]||void 0===g[0]||void 0===m[1]||void 0===g[1]||void 0===m[2]||void 0===g[2]||void 0===m[3]||void 0===g[3])&&setTimeout(N,1e3);for(var e=0;4>e;e++){var t,n,i=m[e].documentElement;for(n=0;n<i.childNodes.length;n++)if("blocks"===i.childNodes[n].nodeName){t=i.childNodes[n];break}var o=t.childNodes;for(n=0;n<o.length;n++)"block-definition"===o[n].nodeName&&(u[e][o[n].getAttribute("s").trim()]=o[n]);for(i=g[e].documentElement,t=null,n=0;n<i.childNodes.length;n++)if("blocks"===i.childNodes[n].nodeName){t=i.childNodes[n];break}for(o=t.childNodes,n=0;n<o.length;n++)"block-definition"===o[n].nodeName&&(f[e][o[n].getAttribute("s").trim()]=o[n])}h=!0},k=$("#files"),w=$("#upload");w.on("click",function(){window.FileReader||alert("Your browser is not supported"),h||alert("Resources are still being loaded, please wait a moment and then try again"),v=parseInt($('input[name="level"]:checked').val()),p=parseInt($('input[name="startType"]:checked').val()),b=parseInt($('input[name="endType"]:checked').val());var e=k.get(0),t=new FileReader;if(e.files.length){var n=e.files[0];t.readAsText(n),$(t).on("load",i)}else alert("Please upload a file before continuing")})}();